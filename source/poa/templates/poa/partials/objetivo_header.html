<div class="flex flex-col lg:flex-row lg:items-start justify-between gap-6">
  
  <div class="min-w-0 flex-1">
    <h2 class="text-2xl font-bold text-slate-900 leading-tight">
      {{ objetivo.nombre }}
    </h2>
    <p class="text-slate-500 mt-2 text-sm leading-relaxed max-w-3xl">
      {{ objetivo.descripcion|default:"Sin descripción registrada para este objetivo." }}
    </p>

    <div class="mt-4 flex flex-wrap items-center gap-3 text-xs font-medium">
      <span class="inline-flex items-center gap-1.5 px-2.5 py-1 rounded-md bg-slate-100 text-slate-600 border border-slate-200">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-3.5 w-3.5 text-slate-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
        </svg>
        Año {{ objetivo.anio }}
      </span>

      <span class="inline-flex items-center px-2.5 py-1 rounded-md border
        {% if objetivo.estado == 'activo' %} bg-emerald-50 text-emerald-700 border-emerald-200
        {% elif objetivo.estado == 'cerrado' %} bg-slate-50 text-slate-600 border-slate-200
        {% else %} bg-amber-50 text-amber-700 border-amber-200 {% endif %}">
        {{ objetivo.estado|capfirst }}
      </span>
      
      <span class="inline-flex items-center gap-1.5 px-2.5 py-1 rounded-md bg-blue-50 text-blue-700 border border-blue-200 transition-all">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-3.5 w-3.5 text-blue-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 002 2h2a2 2 0 002-2z" />
        </svg>
        Avance {{ objetivo.avance }}%
      </span>
    </div>
  </div>

  <div class="flex flex-col sm:flex-row gap-3 shrink-0 items-start sm:items-center">
    
    {% if user.is_superuser or user.puede_ver_modulo_usuarios %}
    <div class="flex items-center gap-1 p-1 bg-slate-50 rounded-lg border border-slate-200">
        
        <button 
            class="p-2 text-slate-400 hover:text-blue-600 hover:bg-white hover:shadow-sm rounded-md transition-all duration-200"
            title="Editar objetivo"
            onclick="document.getElementById('modalObjetivoCrear').classList.remove('hidden')"
            hx-get="{% url 'poa:objetivo_editar' objetivo.id %}"
            hx-target="#modal-objetivo-content"
            hx-swap="outerHTML"
        >
             <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path></svg>
        </button>
        
        <div class="w-px h-4 bg-slate-300 mx-1"></div>

        <button 
            class="p-2 text-slate-400 hover:text-red-600 hover:bg-white hover:shadow-sm rounded-md transition-all duration-200"
            title="Eliminar objetivo"
            hx-post="{% url 'poa:objetivo_eliminar' objetivo.id %}"
            hx-confirm="¿⚠️ ESTÁS SEGURO? Se borrarán TODAS las metas y actividades de este objetivo irreversiblemente."
        >
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path></svg>
        </button>
    </div>
    {% endif %}

    <div class="flex items-center gap-3 w-full sm:w-auto">

        {% if user.is_superuser or user.es_admin_rrhh %}
            <form action="{% url 'poa:cambiar_estado_objetivo' objetivo.pk %}" method="POST" class="w-full sm:w-auto">
                {% csrf_token %}
                <button type="submit" class="w-full sm:w-auto flex items-center justify-center gap-2 px-4 py-2 rounded-lg text-sm font-semibold transition-all shadow-sm
                    {% if objetivo.estado == 'activo' %}
                        bg-white text-amber-600 border border-amber-200 hover:bg-amber-50 hover:border-amber-300
                    {% else %}
                        bg-white text-blue-600 border border-blue-200 hover:bg-blue-50 hover:border-blue-300
                    {% endif %}">
                    
                    {% if objetivo.estado == 'activo' %}
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z" stroke-width="2"/></svg>
                        Finalizar
                    {% else %}
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" stroke-width="2"/></svg>
                        Re-activar
                    {% endif %}
                </button>
            </form>
        {% endif %}

        <a
          href="{% url 'poa:poa' %}"
          class="w-full sm:w-auto inline-flex justify-center items-center px-4 py-2 rounded-lg bg-slate-800 text-white text-sm font-medium hover:bg-slate-700 transition shadow-sm border border-transparent"
        >
          ← Volver
        </a>
    </div>

  </div>
</div>